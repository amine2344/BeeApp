<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>bee_app</title>
  <link rel="icon" href="/assets/images/favicon.ico">
  <link rel="stylesheet" href="/assets/css/loader.css">
  <script defer src="/assets/js/vanillatoasts.js"></script>
  <link href="/assets/css/vanillatoasts.css" rel="stylesheet" />
</head>
<body>
  <div class="loader">
    <svg class="circular" viewBox="25 25 50 50">
      <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
    </svg>
  </div>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-messaging.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-storage.js"></script>
  <script>
    var config = {
        apiKey: "AIzaSyCfLPlG3uk4_CrmnozYxi7Q-Sb5IaFaRXk",
        authDomain: "beeapp-af1c3.firebaseapp.com",
        databaseURL: "https://beeapp-af1c3.firebaseio.com",
        projectId: "beeapp-af1c3",
        storageBucket: "beeapp-af1c3.appspot.com",
        messagingSenderId: "343942339205",
        appId: "1:343942339205:web:6fb2c1d587dac4b3e167ec",
        measurementId: "G-K5QJDNWQ5B"
      }
    firebase.initializeApp(config);
    // FA
    firebase.analytics();
    //FCM
    const messaging = firebase.messaging()

    messaging
      .requestPermission()
      .then(() => {
        console.log('Have Permission')
        return messaging.getToken()
      })
      .then(token => {
        console.log(token)
      })
      .catch(console.log('Error Occured'))

    messaging.onMessage(payload => {
      console.log('Message received. ', payload)
      VanillaToasts.create({
        icon: payload.notification.image,
        title: payload.notification.title,
        text: payload.notification.body,
        timeout: 5000,
        callback: () => { toast.hide() }
      });
    })
  </script>
  <script src="main.dart.js" type="application/javascript"></script>
</body>
</html>
